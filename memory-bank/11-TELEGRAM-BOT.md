# 11. TELEGRAM –ë–û–¢ - –î–ï–¢–ê–õ–¨–ù–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø

## üîê –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø –ò –î–û–°–¢–£–ü:

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞:
- ‚úÖ **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ —Å –±–æ—Ç–æ–º
- Middleware: `AdminAuthMiddleware`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ `telegram_user_id` –≤ —Ç–∞–±–ª–∏—Ü–µ `admins`
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Üí —Å–æ–æ–±—â–µ–Ω–∏–µ "–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω. –í—ã –Ω–µ —è–≤–ª—è–µ—Ç–µ—Å—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º."
- –ï—Å–ª–∏ `is_active = false` ‚Üí —Å–æ–æ–±—â–µ–Ω–∏–µ "–í–∞—à –∞–∫–∫–∞—É–Ω—Ç –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω."

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Middleware:
```php
class AdminAuthMiddleware
{
    public function handle($update, $next)
    {
        $telegramUserId = $update->getUserId();
        
        $admin = Admin::where('telegram_user_id', $telegramUserId)
            ->where('is_active', true)
            ->first();
            
        if (!$admin) {
            return $bot->sendMessage('–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω. –í—ã –Ω–µ —è–≤–ª—è–µ—Ç–µ—Å—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.');
        }
        
        // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∞–¥–º–∏–Ω–∞ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ handlers
        $update->setAdmin($admin);
        
        return $next($update);
    }
}
```

---

## üë§ –ü–†–û–§–ò–õ–¨ –ê–î–ú–ò–ù–ê:

### –ö–æ–º–∞–Ω–¥–∞ `/profile`:
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∞–¥–º–∏–Ω–µ
- –î–∞–Ω–Ω—ã–µ:
  - Telegram User ID
  - Username (–µ—Å–ª–∏ –µ—Å—Ç—å)
  - –†–æ–ª—å (—Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω / –∞–¥–º–∏–Ω)
  - –°—Ç–∞—Ç—É—Å (–∞–∫—Ç–∏–≤–µ–Ω/–Ω–µ–∞–∫—Ç–∏–≤–µ–Ω)
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–π (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
  - –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

### –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è:
```
üë§ –ü—Ä–æ—Ñ–∏–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

üÜî ID: 123456789
üë§ Username: @username
üëë –†–æ–ª—å: –°—É–ø–µ—Ä-–∞–¥–º–∏–Ω
‚úÖ –°—Ç–∞—Ç—É—Å: –ê–∫—Ç–∏–≤–µ–Ω
üìä –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Å–µ—Å—Å–∏–π: 42
üìÖ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω: 01.01.2024
```

### Inline-–∫–Ω–æ–ø–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è:
- "–ú–æ–∏ —Å–µ—Å—Å–∏–∏" - –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ø–∏—Å–∫—É —Å–µ—Å—Å–∏–π –∞–¥–º–∏–Ω–∞
- "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞" - –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üìã –ö–û–ú–ê–ù–î–´ –ë–û–¢–ê:

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
- `/start` - –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ, –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞
- `/profile` - –ø—Ä–æ—Ñ–∏–ª—å –∞–¥–º–∏–Ω–∞
- `/sessions` - —Å–ø–∏—Å–æ–∫ —Å–µ—Å—Å–∏–π (—Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π)
- `/addadmin` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞ (—Ç–æ–ª—å–∫–æ —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω)

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥:
- –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ `AdminAuthMiddleware`
- –ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞ ‚Üí –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö Handlers

---

## üéØ HANDLERS:

### ProfileHandler:
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã `/profile`
- –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∞–¥–º–∏–Ω–∞ –∏–∑ –ë–î
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø—Ä–æ—Ñ–∏–ª–µ–º

### AdminPanelHandler:
- –ì–ª–∞–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∞
- –°–ø–∏—Å–æ–∫ —Å–µ—Å—Å–∏–π —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è

### SessionHandler:
- –†–∞–±–æ—Ç–∞ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å–µ—Å—Å–∏–µ–π
- –ü–æ–∫–∞–∑ –¥–∞–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–∏
- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π

### ActionHandler:
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π –∞–¥–º–∏–Ω–∞
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ –ë–î
- –û—Ç–ø—Ä–∞–≤–∫–∞ WebSocket —Å–æ–±—ã—Ç–∏–π

---

## üîÑ –ü–û–¢–û–ö –†–ê–ë–û–¢–´ –° –ë–û–¢–û–ú:

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ/–∫–æ–º–∞–Ω–¥—É**
2. **AdminAuthMiddleware** –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø
3. –ï—Å–ª–∏ –¥–æ—Å—Ç—É–ø –µ—Å—Ç—å ‚Üí –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ Handler
4. –ï—Å–ª–∏ –¥–æ—Å—Ç—É–ø–∞ –Ω–µ—Ç ‚Üí —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç–∫–∞–∑–µ
5. Handler –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ
6. –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ê–î–ú–ò–ù–ê:

### –î–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–π (–≥–¥–µ `admin_id = —Ç–µ–∫—É—â–∏–π –∞–¥–º–∏–Ω`)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–π
- –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è:
- –ú–µ—Ç–æ–¥ –≤ `AdminService`: `getAdminStatistics($adminId)`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç DTO —Å –¥–∞–Ω–Ω—ã–º–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `ProfileHandler`
